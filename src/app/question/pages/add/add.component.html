<div class="container">
    <div class="row">
        <div class="col-md-6">
            <h1 class="text-left">
                Agregar Pregunta
            </h1>
        </div>
        <div class="col-md-6 text-center">
            <mat-slide-toggle 
            class="ms-5" 
            #slideToggleRef 
            (change)="onSlideToggleChange($event)"
            >
            Texto | Imagen
            </mat-slide-toggle>
        </div>
    </div>
</div>

<div mat-dialog-content>

    <form [formGroup]="formQuestion">

        <mat-grid-list cols="5" rowHeight="90px">
            <mat-grid-tile [colspan]="4">
                <mat-form-field appearance="outline">
                    <mat-label>Descripción</mat-label>
                    <input 
                        type="text"
                        matInput
                        formControlName="description"
                        placeholder="Descripción"
                        autocomplete="off">
                        <mat-error 
                            *ngIf="formQuestion.get('description')?.touched &&
                                   formQuestion.get('description')?.errors?.['required']">
                                   <span>Descripción es requerida</span>
                        </mat-error>

                        <mat-error 
                            *ngIf="formQuestion.get('description')?.touched &&
                                   formQuestion.get('description')?.hasError?.('maxlength')">
                                   <span>Valor máximo permitido 120 carácter</span>
                        </mat-error>
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1">
                <mat-form-field appearance="outline">
                    <mat-label>Puntuación de la pregunta</mat-label>
                    <input 
                        type="text"
                        matInput
                        formControlName="puntuation"
                        placeholder="Puntuación de la pregunta"
                        autocomplete="off">
                        <mat-error 
                            *ngIf="formQuestion.get('puntuation')?.touched &&
                                   formQuestion.get('puntuation')?.errors?.['required']">
                                   <span>Puntuación es requerida</span>
                        </mat-error>

                        <mat-error 
                            *ngIf="formQuestion.get('puntuation')?.touched &&
                                   formQuestion.get('puntuation')?.errors?.['pattern']">
                                   <span>Este campo solo permite números</span>
                        </mat-error>
                </mat-form-field>
            </mat-grid-tile>
        </mat-grid-list>

        

        <app-filter-skill [question]="question" (questionModified)="receiveModifiedQuestion($event)"></app-filter-skill>

        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h1 class="text-left">
                        Agregar Respuesta
                    </h1>
                </div>
                <div class="col-md-6 text-center">
                    <mat-slide-toggle 
                    class="ms-5" 
                    #slideToggleRef 
                    (change)="onSlideToggleChange($event)"
                    >
                    Texto | Imagen
                    </mat-slide-toggle>
                </div>
            </div>
        </div>
        
        <mat-grid-list cols="5" rowHeight="90px">
            <mat-grid-tile [colspan]="2">
                <mat-slide-toggle 
                    class="text-center" 
                    #slideToggleRef 
                    (change)="onSlideToggleChange($event)"
                    >
                    Correcto | Incorrecto
                    </mat-slide-toggle>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="2">
                <mat-form-field appearance="outline">
                    <mat-label>Descripción</mat-label>
                    <input 
                        type="text"
                        matInput
                        formControlName="description"
                        placeholder="Descripción"
                        autocomplete="off">
                        <mat-error 
                            *ngIf="formQuestion.get('description')?.touched &&
                                   formQuestion.get('description')?.errors?.['required']">
                                   <span>Descripción es requerida</span>
                        </mat-error>

                        <mat-error 
                            *ngIf="formQuestion.get('description')?.touched &&
                                   formQuestion.get('description')?.hasError?.('maxlength')">
                                   <span>Valor máximo permitido 120 carácter</span>
                        </mat-error>
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1">
                <button mat-raised-button class="BotonAddAnswer" color="primary" (click)="AddQuestion()">Add
                    
                </button>
            </mat-grid-tile>
        </mat-grid-list>
        

        <!-- FALTA OCULTAR LA IMAGEN Y MOSTRARLA SOLO CUANDO EL TOGGLE ESTE ACTIVADO -->
        
            <mat-grid-list cols="2" rowHeight="90px">
            <mat-grid-tile>
                <button
                    type="button"
                    class="btn btn-dark form-control"
                    (click)="ImgInputAnswer.click()"
                    >
                        Subir Imagen
                    <i class="material-icons right">
                        add_a_photo
                    </i>
                </button>
            </mat-grid-tile>
            
            <mat-grid-tile>
                <div class="row">
                    <input
                      type="file"
                      formControlName="photoQuestion"
                      hidden
                      #ImgInputAnswer
                      (change)="captureImg($event)"
                    />

                    <div *ngIf="previewImg" class="row">
                        <div class="row m-3">
                          <img width="120px" [src]="previewImg"/>
                        </div>
                    </div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
       
    </form>
</div>

<div mat-dialog-actions>
    <button
        mat-raised-button
        class="botonGuardar"
        (click)="AddQuestion()"
        [disabled]="formQuestion.invalid || question.skillList.length < 1" 
    >
        Guardar
    </button>

    <button
        class="botonVolver"
        mat-raised-button
        mat-dialog-close
    >
        Volver
    </button>
</div>